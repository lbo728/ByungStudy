# 블록체인의 상태

**_강의: [섹션01-블록체인의 상태](https://www.inflearn.com/course/lecture?courseSlug=klaytn-%EC%8A%A4%EB%A7%88%ED%8A%B8%EA%B3%84%EC%95%BD%EA%B3%BC-%ED%83%88%EC%A4%91%EC%95%99%EC%95%B1&unitId=30501&tab=curriculum)_**

<br>

블록체인을 `상태기계`라고도 부름 → State Machine

<br>

### (어카운트 기반) 블록체인의 상태

블록체인은 **트랜잭션으로 변화하는 상태 기계** (State Machine)

- 트랜잭션 → 변경사항들
- 상태에는 초기값, 최종값이 있음

![스크린샷 2024-03-19 오후 2 06 59](https://github.com/lbo728/BlockChainStudy/assets/72309817/bbaa363c-8a19-4aa9-96fe-d5c08f8e9d56)

- 금융에서 원장에 적히는 변경사항들 → `금융거래`
  - 누가 누구에게 돈을 주었다고 기록됨
  - 트랜잭션이란 것은 블록체인의 상태를 변경하는데, 이때 없던 어카운트가 생기는 것
    - Block_0에서는 Alice 뿐이지만, Block_1에서는 Bob이라는 어카운트가 상태에 추가됨
      - 예시) 웹서비스 사례: 다음(Daum)에 들어가 회원가입을 한다 →'회원가입'이라는 프로세스를 통해서 다음 이메일 서비스에 `어카운트`가 하나 생김 → 회원가입은 다음에게 요청함 → 다음 웹서비스는 그 `어카운트`라는 상태를 계속 유지해나감
        - 어카운트를 만든다는 것은, `키페어`를 만드는 것
          - 그 키페어와 연관되어 있는 정보를 가지고 트랜잭션을 만들고, 그 트랜잭션이 블록체인의 변경을 더 해주어야지만 그 어카운트의 존재가 블록체인에 알려짐

<br>

### 상태 기계

- 블록체인은 `초기 상태`에서 `변경사항`을 적용하여 `최종 상태`로 변화하는 `상태 기계`
  - 이전 블록의 `최종 상태(final state)`는 현재 블록의 `초기 상태(initial state)`
  - **Gen block의 경우** `임의의 초기값`들이 설정되는데 이것이 gen block의 초기상태이자 최종상태
- (어카운트 기반) 블록체인의 상태

  - TX는 **어카운트를 생성하거나 변경**

    - e.g., Alice가 기존에 존재하지 않던 주소 X에 1 ETH를 전송하면 새로운 EOA가 생성
    - e.g., Alice가 새로운 스마트 컨트랙트를 배포 (컨트랙트도 어카운트)
    - e.g., Alice가 Bob에게 5 ETH를 전송하는 TX가 체결되면 Alice의 Bob의 잔고가 변경

  - 항상 같은 결과를 보장하기 위해 **하나의 TX가 반영되는 과정에서 다른 TX의 개입은 제한됨**

- 블록을 나눈다는 것은, **어떤 변경이 생겼는지 확인해보는 것**
  - 새로운 블록을 열어보면 트랜잭션들이 있고, 그 트랜잭션들을 자신이 알고 있는 이전 블록의 최종값에 적용해 보았더니 어떤 결과가 나왔다. 그 결과가 모두가 다 동의하는 결과

> **상태 기계 (State machine)**:  
> `상태 기계`는 알고리즘을 설계하는 데 사용되는 **수학적 추상화 표현**입니다. 상태 기계는 일련의 입력을 읽고 해당 입력에 따라 다른 상태로 변경됩니다.
> **_참고: [상태 기계 | MDN](https://developer.mozilla.org/ko/docs/Glossary/State_machine)_**
