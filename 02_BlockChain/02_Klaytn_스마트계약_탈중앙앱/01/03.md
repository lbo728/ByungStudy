# 트랜잭션

**_강의: [섹션01-트랜잭션](https://www.inflearn.com/course/lecture?courseSlug=klaytn-%EC%8A%A4%EB%A7%88%ED%8A%B8%EA%B3%84%EC%95%BD%EA%B3%BC-%ED%83%88%EC%A4%91%EC%95%99%EC%95%B1&unitId=30502&tab=curriculum)_**

<br>

트랜잭션이 비트코인에서는 `거래` 개념이 맞음

- 하지만, 이더리움과 같이 `스마트 컨트랙트`라는 하나의 프로그램을 실행하는 환경에서는 적합한 개념이 아님
  → 명령어 혹은 요청 정도로 이해해야함

<br>

### (Recall) Ethereum 어카운트의 종류

1. `External Account`: 사용자(end user)가 사용하는 어카운트 (a.k.a. EOA)
2. `Contract Account`: `스마트 컨트랙트`를 표현하는 어카운트

- Ethereum은 EOA와 스마트 컨트랙트의 상태를 기록 및 유지

  - 스마트 컨트랙트는 특정 주소에 존재하는 **실행 가능한 프로그램**
  - 프로그램은 `상태`를 가지기 때문에 Ethereum/Klaytn은 스마트 컨트랙트를 `어카운트`로 표현

- EOA는 **블록에 기록되는 TX**를 생성
  - 블록에 기록되는 TX들은 명시적인 변경을 일으킴
    - e.g., 토큰 전송, 스마트 컨트랙트 배포/실행

<br>

### 트랜잭션(TX)과 가스(Gas)

- TX의 목적은 블록체인의 상태를 변경하는 것
  - TX는 `보내는 사람(sender, from)`과 `받는 사람(recipient, to)`이 지정되어 있음
  - `to`가 누구냐에 따라 TX의 목적이 세분화
    - 예시)
      1. to가 External Account: 사용자가 사용제에게 보냈다면, 단지 토큰을 전송한 것 → value transfer
      2. Sender가 External Account인데, Recipient가 Contract Account: Contract에 실행됨
      3. Recipient가 지정이 안된 경우: 새로운 Contract를 배포한 것
- `Gas`: TX를 처리하는데 발생하는 비용
  - TX를 처리하는데 필요한 자원(computing power, storage)을 비용으로 전환한 것이 가스(gas)
  - `Sender`는 TX의 처리를 위해 필요한 가스의 총량과 같은 가치의 `플랫폼 토큰`**을 제공해야함**
- 이때 지출되는 플랫폼 토큰을 `가스비(Gas Fee)`라 정의
- 가스비는 **블록을 생성한 노드가 수집**
  - 비유: 넷플릭스
    - 넷플릭스에 가입해서 월 구독비를 내는 것과 유사

#### 가스로 불리는 이유:

- 이더리움에서 유통되는 토큰의 이름은 `이더(ETH)`
  - 즉, 이더는 `토큰의 유닛`
- 마이닝 하는 사람들은 트랜잭션에 얼마만큼의 가스비를 낼 것인지 먼저 확인함
  - 가스비를 더 높이 쳐주는 사람 것을 먼저 처리해줌
- 비트코인이나 이더리움을 거래할 때 `트랜잭션 fee`를 높게 쓰면 높게 쓸수록 트랜잭션이 블록에 빠르게 들어감
- 이런 여지를 만들기 위해, `연산 비용`과 `실제 토큰`을 분리해놓음
  - 연산 비용 → `가스`
- 이더리움에서의 트랜잭션 → `연산 유닛`
- 한 유닛 당 얼마만큼의 가스비를 낼지 가스 프라이스를 적어내야함
  - `가스 프라이스 x 사용한 가스` -> 실제 부담하게 되는 이더
- 하지만 비용을 많이 쓸수록 블록을 처리해주는 방식에 논란이 있었고, 클레이튼은 네트워크 성능을 빠르게 하여 가스 프라이스를 받지 않도록 결정
