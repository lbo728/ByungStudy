# 암호화 기법을 소개합니다 (p128 ~ p140)

사용자 계정 식별하고 보호하는 방법

- 블록체인에서 `비대칭 암호화 기법`은 사용자를 식별하고 자산을 보호하는 근간을 이룸

> **비유: 전통적인 편지와 우편함**  
> 오늘날에도 여전히 전통적인 편지는 많이 이용된다. 전통적인 편지는 우체부가 직접 해당 주소의 우편함에 편지를 넣어주는 방식으로 배달된다. 우편함의 편지구멍은 들창처럼 움직이는데, **편지를 넣는 것은 쉽지만 꺼내는 것은 어렵게 설게되어 있다.** 편지를 꺼내는 일은 `우편함 열쇠`를 가진 주인만이 할 수 있어야 하기 때문이다. 이 개념은, 이메일을 보낼 때, 채팅 앱 메시지 전송, 은행 계좌 자금 이체 등 유사하게 적용된다.
>
> 앞선 사례의 공통되는 보안 개념은, 정보를 두 종류로 분리한다는 것.
>
> 1. 우편함의 주소 역할을 하는 `공개된 정보`
> 2. 우편함을 열고 그 안의 내용물에 접근하기 위한 열쇠 역할을 하는 `개인정보`
>
> 블록체인에서도 **개인정보 보호를 위해** 동일한 개념을 이용하고 있다.

<br>

## 1. 목표

목표는 고유한 소유자와 자산을 식별하고, 법저긍로 허가된 사람만 그 자산에 접근할 수 있도록 보장하는 것

<br>

## 2. 해결해야 할 과제

분산 시스템의 개방형 아키텍처를 해치지 않으면서, 계정에 할당된 자산을 보호하는 것

- 블록체인은 누구에게나 열려 있는 P2P 시스템이나, 할당된 자산에 아무나 접근할 수 없어야 함
- 소유권을 다른 계정으로 이전할 권리는 오직 그 계정의 소유자로만 국한되어야 함

<br>

## 3. 아이디어

누구나 자산을 보낼 수 있지만, 모인 자산에는 계정의 소유자만 접근할 수 있어야 함

- 우편함처럼 위치가 누구에나 개방되어 있지만, 개인이 보관하고 있는 열쇠가 필요

> **우편함의 주요한 성질**: 그 위치가 공개되어 있어 누구나 무엇인가를 넣을 수 있지만, 오로지 소유주만 키를 사용해 열 수 있음

우편함의 이중성과 동일한 성질을 가진 것이 디지털 세계에서 `공개-개인-키 암호화`(public-priviate-kery encryption)로 존재

- 소유권을 이전할 수 있는 계정을 식별할 때는 누구나 `공개 키`를 사용하고, 접근은 해당 `개인 키`를 가진 사람에게만 허용

## 4. 암호화 기법 살짝 알아보기

### 1) 암호화 기법의 주요 아이디어

대문 자물쇠나 은행 금고 같은 장치를 디지털로 구현해 허가받지 않은 사용자의 접근으로부터 데이터를 보호하는 것

- 자물쇠나 열쇠와 비슷하게 암호화 기법도 데이터를 보호하기 위해 `키`key라는 것을 사용함

### 2) 용어

- 암호화와 복호화는 각각 **데이터 보호**와 **데이터 보호 해제**를 의미함
  - `암호화`(encryption): 문을 잠그는 것을 디지털로 구현한 것
  - `복호화`(decryption): 문을 여는 것
- 암호화된 데이터는 `암호문`이라 부름
  - 암호문을 복호화하면 원시 문장을 알아낼 수 있음

#### 암호화와 복호화 과정

1. 암호화 키를 사용해 원시 데이터를 암호화하여 암호문을 만든다.
2. 만들어진 암호문은 보관하거나 누군가에게 전송한다.
3. 이후 암호화 키를 사용해 암호문을 복호화하여 원시 데이터를 복원한다.

![암호화기법](https://github.com/lbo728/BlockChainStudy/assets/72309817/d4161691-8da2-4d71-8a4c-52bcb5aef82f)

<br>

### 3) 대칭 암호화 기법

데이터를 암호화하고 복호화할 때, `동일한 키`를 사용하는 암호화 기법

- 데이터를 암호화한 키를 가지고 있으면, 암호문을 복호화할 수 있는 키 또한 가진 셈
- 그러나, 암호화와 복호화에 동일한 키를 사용하는 것은 바람직하지 못함

![블록체인_무엇인가-대칭_암호화_기법](https://github.com/lbo728/BlockChainStudy/assets/72309817/beaf227c-9fd7-4f2c-988f-35502f0fd756)

<br>

### 4) 비대칭 암호화 기법

두 개의 `상호보완적 키`를 사용하는 기법

- 두 키 중 하나를 사용해 생성된 암호문은, 오직 다른 하나의 키로만 복호화됨(반대도 마찬가지)

![블록체인_무엇인가-_비대칭_암호화_기법](https://github.com/lbo728/BlockChainStudy/assets/72309817/4c25aa75-7dcb-41da-920f-181cd35b568a)

흰색과 검은색의 두 키를 합치면 `상호보완적 한 쌍의 키`

#### 상단 부분 - 암호화

- 검은색 키(암호화) → 암호문 생성(검은색 상자)
- 흰색 키(암호화) → 다른 암호문 생성(흰색 상자)

#### 하단 부분 - 복호화

- 암호문(검은색 상자) → 흰색 키(복호화)
- 암호문(흰색 상자) → 검은색 키(복호화)

> **암호문을 생성할 때 사용한 키로는 절대 암호를 복호화할 수 없음**
>
> - 암호문을 생성하는 것은, 하나의 키만 있어도 가능
> - 하지만 **상호보완적 쌍을 이루는 다른 키가 없다면**, 복호화할 수 없음

<br>

## 5. 실생활에서 비대칭 암호화 기법을 사용하는 방법

### 1 | 키의 생성과 배분

실생활에서 비대칭 암호화 기법을 사용할 때는 보통 두 개의 키에 각각의 역할을 나타내는 특별한 이름을 붙인다.

- 비대칭 암호화 기법은, 대개 `공개-개인-키` 암호화 기법이라 불림
- `공개 키`: 신뢰 여부와 상관없이 누구에게나 주어짐
- `개인 키`: 안전하게 사적으로 보관해야함

#### 비대칭 암호화 기법 응용프로그램이 수행해야 할 최초 단계

1. 암호화 소프트웨어를 사용해서 `개인 키`를 생성한다.
2. 상호보완적인 `공개 키`를 생성한다.
3. `개인 키`는 간직한다.
4. `공개 키`는 모두에게 배부한다.

<br>

### 2 | 키의 사용

데이터 흐름 방향에 따라 다른 2가지 일반적인 방법

#### 1) 공개에서 개인

정보 → `공개 키`로 암호화 → `개인 키`로 복호화

누구나 암호문을 생성할 수 있지만, 개인 키를 가진 소유자만이 암호문을 복호화하고 메시지를 읽을 수 있음

- 예시) 누구나 편지를 넣을 수 있지만, 오직 소유자만 열 수 있은 우편함

<br>

#### 2) 개인에서 공개

정보 → `개인 키`로 암호화 → `공개 키`로 복호화

누구나 메시지를 읽을 수 있지만, 모두에게 공개할 메시지는 오직 개인 키를 가진 소유자만 생성 가능

- 예시) 공개 뉴스 게시판, 공개 알림 게시판
- 활용 분야: 저작권 증명

<br>

## 6. 블록체인에서 비대칭 암호화 기법은 언제 쓸까?

### 1) 계정 식별

블록체인은 소유자와 자산의 매핑을 유지하기 위해 사용자 계정을 모두 식별해야함

- 사용자 계정 식별 및 소유권 이전: 비대칭 암호화 기법 중 `공개→개인` 접근 방식을 사용
- 블록체인의 계정 번호: `공개 암호 키`
  - 트랜잭션 데이터는 공개 암호 키를 사용해, 소유권 이전에 관여된 계정들을 식별
  - 예시) 블록체인의 사용자 계정 == 우편함

<br>

### 2) 트랜잭션 승인

트랜잭션 데이터는 소유권 양도에 관한 내용에 **그 소유권자가 동의했는지를 증명**하는 데이터를 항상 포함해야함

- 이 동의 속 정보 흐름: 소유권을 이전하려는 계정의 소유자 → 트랜잭션 데이터를 검사하는 모두
  - 비대칭 암호화 기법 중 `개인→공개 ` 접근 방식

#### 트랜잭션 승인 과정

1. 소유권을 이전하려는 계정의 소유자, `개인 키` 사용
2. 암호문 생성
3. 다른 모든 사람들은 `공개 키`를 사용하여 **거래 증명** 가능
   - 소유권을 이전하려는 계정 번호: `공개 키`

<br>

> **합법적 소유자의 소유권 이전 과정**
> → 자신의 `개인 암호 키`를 사용하여
> → 추적 가능한 `디지털 서명`을 생성
> → 트랜잭션 승인
