# 이중사용, 블록체인이 해결한다

P2P 시스템의 취약성을 이용한 범죄 에방책

> **무결성(無缺性)**:
> 데이터의 정보가 변경되거나 오염되지 않도록 하는 원칙. 네트워크에서 데이터 전송 시 비인가 접속자가 데이터를 변경하거나 위조하지 않았다는 것을 나타낸다.
>
> - 缺 이지러질 결, 머리띠 규
>   - (이지러질 결)
>   - 이지러지다(한쪽 귀퉁이가 떨어져 없어지다)
>   - 없다
>   - **_참고: [무결성 | 네이버 사전](https://ko.dict.naver.com/#/entry/koko/1dde70640cda4f8692a8e940957aba2b)_**

## 1. 이중사용은 이중분양 사기와 비슷하다

- 소유권 정보를 관리하는 원장은 중앙 데이터베이스가 아닌, 개별 컴퓨터들
  - 각각의 피어가 자신만의 원장 복사본을 별도 관리
- 소유권이 이전되면, 시스템 내 모든 원장에서 그 사실이 기록된 최신 버전으로 갱신되어야함
- → 그런데, 피어 간에 정보를 전달하며 모두 갱신하는 데에는 시간이 걸림
- → 시스템의 마지막 멤버까지 최신 원장의 복사본을 가질 때까지 시스템 내의 정보는 일관성을 상실하게 됨
- → 최신 정보를 습득한 특정 노드에서는 이를 악용할 여지를 남김

#### 부동산의 소유권을 관리하는 P2P 시스템을 가정

- A가 B에게 집을 팔았다.
- P2P 시스템의 어느 원장에 기록됨
- 각 피어는 소유권 이전 사실을 전달
- 아직 모든 피어가 최신 원장 복사본으로 갱신되지 않았을 때,
  - → A에서 C로 소유권 이전을 요청했고, 아직 갱신되지 않은 피어가 이 요청을 받아드린다면
  - → A는 결과적으로 집을 2번 판매한 셈
  - → 하지만 B와 C가 동시에 같은 집을 소유할 수 없으므로, 둘 중 한쪽만 합법적 소유자가 되어야함
  - 이 상황이 **이중사용**(double spending) 문제

## 2. 대표적인 이중사용 문제 3가지 유형

### 1) 디지털 재화를 복사해 발생하는 이중사용 문제

- 컴퓨터 데이터는 **별다른 제약 없이 복사할 수 있기 때문에**, 디지털 재화뿐만 아니라 소유자가 둘 이상 될 수 없는 모든 데이터에 문제 야기

### 2) 원장의 분산 P2P 시스템에서 발생하는 이중사용 문제

- 모든 요소들이 동일한 정보를 전달받기까지 시간이 걸리는 문제로 인해 **일부 피어가 상이한 소유권 정보를 가지는 상황**
- 최신 정보를 먼저 획득한 누군가가 소유권 이전을 이중으로 할 수 있는 여지가 있음

### 3) 분산 P2P 시스템의 무결성이 침해된 이중사용 문제

- 추상화하여 이중사용 문제를 바라보면, 분산 P2P 시스템 내 **데이터의 일관성을 유지하는 문제**로 볼 수 있음
- 데이터의 일관성은 시스템 무결성의 한 측면이믈 이중사용 문제는 무결성이 침해된 특정 사례로 이해할 수 있음

## 3. 이중사용 문제를 해결하는 방법

### 1) 디지털 재화를 복사해 이중으로 지불하는 문제 해결

- 소유권의 본질과 관련이 있음
- 디지털 재화를 나타내는 데이터와 소유자를 매핑하는 수단만 있으면 해결 가능
  - 중앙 통제된 실물 책이나 전자 원장으로도, 구조와 상관없이 원장만 올바로 동작한다면 해결 가능

### 2) 원장의 분산 P2P 시스템에서 발생한 이중사용 해결

- 이 책에서 쓰인 `블록체인`이란 용어 자체가 원장의 분산 P2P 시스템의 이중사용 문제를 없애주는 해결책

### 3) 분산 P2P 시스템의 무결성이 침해된 이중사용 해결

- `블록체인-기술묶음`이 시스템의 무결성을 확보하고 유지할 수 있는 적절한 도구인가는 응용분야의 목적을 알아야만 할 수 있음
  - 결국 분산 P2P 시스템의 응용분야에 따라 블록체인이 아닌 다른 기술이나 데이터 구조 혹은 다른 알고리즘이 무결성을 확보하고 유지하기에 더 적합할 수도 있음
