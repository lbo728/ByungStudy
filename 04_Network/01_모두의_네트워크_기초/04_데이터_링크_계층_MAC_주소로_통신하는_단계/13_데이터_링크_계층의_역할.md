# 13 데이터 링크 계층의 역할

`데이터 링크 계층`은 **네트워크에서 데이터를 관리하고 전달하는 계층**으로, 데이터 전송의 신뢰성과 효율성에 중요한 역할을 함

- 데이터 링크 계층은 **데이터를 작은 프레임 단위로 분할**하고, **MAC 주소를 활용하여 장비를 식별함**
  - 그런데 네트워크에서 **여러 기기가 동시에 데이터를 전송하려고 하면 신호 충돌이 발생함**
  - 때문에 데이터 링크 계층은 오류를 탐지하고 수정하는 역할을 하며, **데이터의 원활한 흐름과 네트워크 매체에서 충돌 관리도 수행함**
- 데이터 링크 계층에서 오류를 감지하거나 수정하는 방식으로는 `회선 제어`, `오류 제어`, `흐름 제어`가 있음

<br>

## 1. 회선 제어

`회선 제어`: 오류를 감지하기보다는 **회피하는 방법으로** 신호 간 충돌 현상이 발생하지 않도록 제어함

- 그러기 위해 **신호의 시작을 의미하는** `ENG`(_Enquiry_)와 **끝을 의미하는** `EOT`(_End of Transmission_)를 명시적으로 지정함
- 수신자는 송신자로부터 신호를 받으면 '응! 잘 받았어'라는 의미의 `ACK`(_Ackowledgement_)를 송신자에게 보내서 **신호를 정상적으로 수신하였음을 알려줌**
- 이러면 신호 간 충돌을 피할 수 있음

<br>

<img width="640" alt="컴퓨터 간의 통신 약속" src="https://github.com/lbo728/ByungStudy/assets/72309817/1c6e2087-b91e-4006-8864-b3b11769d762">

_회선 제어_

<br>

## 2. 오류 제어

`오류 제어`: 송수신 데이터가 **외부 간섭, 시간 지연 등에 의해 데이터가 변형되거나 순서가 어긋나는 등의 통신 장애가 발생하지 않도록** 오류를 검출하고 정정하여 통신에 대한 신뢰성을 확보하는 방법임

- 오류 검사로 사용되는 것 중에 `패리티 검사`라는 것이 있음
- `패리티 검사`(_parity check_): 수신자에게 보내는 최종 데이터의 1의 개수를 **짝수 개로 보낼지(even parity)**, **홀수 개로 보낼지(odd parity)** 송･수신자가 **미리 약속하고** 여분의 비트(`패리티 비트`)를 채워 보내는 방법
- e.g., 송･수신자가 1을 짝수 개 보내겠다고 미리 약속한 상황
  - 데이터에 1이 4개라면 남은 비트(패리티 비트)에 0을 추가해서 보냄
  - 그러면 송수신에 사용된 데이터가 문제없음을 보증할 수 있음

<br>

![4-2](https://github.com/lbo728/ByungStudy/assets/72309817/16021b7f-2e40-45c6-aa3b-5651e9887742)
_패리티 검사_

<br>

패리티 검사 외에도 `CRC`(_Cyclic Redundancy Check_)나 `검사합`(_Checksum_) 등의 방식도 있음

- `CRC`: **데이터에 `CRC 코드`를 추가하여 오류를 감지하는 방법**으로, 송신자가 CRC 코드를 생성하고 수신자 측에서도 동일한 계산을 수행하여 일치 여부를 확인
- `검사합`: 데이터의 **각 바이트 값을 더하거나 연산하여 생성되는 값**
  - 송신자가 데이터와 관련된 검사합을 계산하고 수신자 측에서도 동일한 계산을 수행함
  - **두 검사합 값이 일치하면 **데이터가 오류 없이 전송된 것으로 간주됨
  - 또한 오류가 발생한 경우 이를 정정하는 방법으로는 해밍 코드(Hamming code)가 있음
  - `해밍 코드`: **데이터에 추가적인 `패리티 비트`를 포함시킴**
    - 이 패리티 비트들은 데이터 비트와 조합되어 특별한 방식으로 구성됨
    - 패리티 비트들을 분석하여 **오류가 발생한 비트를 식별**하고, **해당 비트의 값을 수정함으로써 오류를 정정함**

<br>

## 3. 흐름 제어

`흐름 제어`: 송신자와 수신자의 데이터 처리 속도 차이를 해결하기 위해 **수신자 상황에 따라 송신자의 데이터 전송량을 조정하는 방법**

- 흐름 제어로 사용되는 방법 중 하나가 `정지-대기`(_Stop & Wait_)
  - `정지-대기`: 송신자가 하나의 데이터를 전송한 후 **다음 데이터를 전달하기 전에 확인 응답을 기다리는 방법**
  - e.g., 다음 그림과 같이 수신자가 ACK라는 메시지를 송신자에게 전달해야만 다음 데이터를 보내는 방법

<br>

<img width="640" alt="컴퓨터 간의 통신 약속" src="https://github.com/lbo728/ByungStudy/assets/72309817/876aa289-c2c6-40be-8c03-df78c1cc6137">

_Stop & Wait_

`오류 제어`와 `흐름 제어`는 전송 계층에서도 사용됨
